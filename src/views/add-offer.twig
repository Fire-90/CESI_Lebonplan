{% extends "base.twig" %}

{% block title %}Ajouter une offre - Lebonplan{% endblock %}

{% block content %}
    <section class="form-section">
        <h1 class="centerr">Ajouter une offre</h1>

        {% if error %}
            <div class="error">{{ error }}</div>
        {% endif %}

        <form action="?page=add-offer" method="POST">
            <div class="form-group">
                <label for="NameOffer">Nom du poste</label>
                <input type="text" id="NameOffer" name="NameOffer" required>
            </div>

            <div class="form-group">
                <label for="DescOffer">Description</label>
                <textarea id="DescOffer" name="DescOffer" required></textarea>
            </div>

            <div class="form-group">
                <label for="RemunOffer">Rémunération</label>
                <input type="number" id="RemunOffer" name="RemunOffer" required>
            </div>

            <div class="form-group">
            <label for="idCompany">Entreprise :</label>
            <select name="idCompany" id="idCompany" required>
                <option value="">-- Sélectionnez une entreprise --</option>
                {% for company in companies %}
                    <option value="{{ company.idCompany }}" data-city="{{ company.City }}">{{ company.NameCompany }}</option>
                {% endfor %}
            </select>
            </div>

<div class="form-group">
    <label for="City">Ville</label>
    <input type="text" id="City" name="City" readonly>
</div>

<script>
    document.getElementById('idCompany').addEventListener('change', function() {
        let selectedOption = this.options[this.selectedIndex]; // Récupère l'option sélectionnée
        let city = selectedOption.getAttribute('data-city');  // Récupère la ville de l'attribut data
        document.getElementById('City').value = city; // Remplit automatiquement l'input
    });
</script>

            <button type="submit" class="btn-submit">Ajouter</button>
        </form>
    </section>
{% endblock %}