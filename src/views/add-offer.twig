{% extends "base.twig" %}

{% block title %}Ajouter une offre - Lebonplan{% endblock %}

{% block content %}
    <section>
        <h1 class="center">Ajouter une offre</h1>

        <form action="?page=ajout-offer" method="POST">
            <div class="form-group">
                <label for="NameOffer">Nom du poste</label>
                <input type="text" id="NameOffer" name="NameOffer" required>
            </div>

            <label for="idCompany">Entreprise :</label>
<select name="idCompany" id="idCompany" required>
    <option value="">-- Sélectionnez une entreprise --</option>
    {% for company in companies %}
        <option value="{{ company.idCompany }}" data-city="{{ company.City }}">{{ company.NameCompany }}</option>
    {% endfor %}
</select>

<div class="form-group">
    <label for="City">Ville</label>
    <input type="text" id="City" name="City" readonly>
</div>

<script>
    document.getElementById('idCompany').addEventListener('change', function() {
        let selectedOption = this.options[this.selectedIndex]; // Récupère l'option sélectionnée
        let city = selectedOption.getAttribute('data-city');  // Récupère la ville de l'attribut data
        document.getElementById('City').value = city; // Remplit automatiquement l'input
    });
</script>


            <div class="form-group">
                <label for="Renum">Rénumération</label>
                <input type="number" id="Renum" name="Renum" placeholder="€/mois" required>
            </div>
            <div class="form-group">
                <label for="Date">Date de publication</label>
                <input type="date" id="Date" name="Date" placeholder="JJ/MM/AAAA" required>
            </div>

            <div class="form-group">
                <label for="NameCompetence">Compétences</label>
                <input type="text" id="NameCompetence" name="NameCompetence" required>
            </div>
            <button type="submit" class="btn-submit">Ajouter</button>
        </form>
    </section>
{% endblock %}
