<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Lebonplan{% endblock %}</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="shortcut icon" href="/assets/images/logo_icon.png" />
</head>
<body>

    <!-- Logo et titre -->
    <div class="title center">
        <img src="/assets/images/logo_full.png" alt="Lebonplan - Le meilleur site d'annonces en ligne">
    </div>

    <!-- Vérifier si on est sur la page de login -->
    {% if app.request.attributes.get('_route') == 'login' %}
        <!-- Si c'est la page de connexion, afficher une navbar simple -->
        <nav class="navbar-login">
            <div class="bar">
                <a href="{{ path('home') }}" class="selected">Accueil</a>
                <a href="{{ path('inscription') }}">S'inscrire</a>
            </div>
        </nav>
    {% else %}
        <!-- Navigation pour écrans larges (navbar standard) -->
        <nav class="navbar">
            <div class="bar">
                <a href="{{ path('home') }}" class="{% if current_page == 'home' %}selected{% endif %}">Accueil</a> <span>|</span>
                <a href="{{ path('entreprises') }}" class="{% if current_page == 'entreprises' %}selected{% endif %}">Entreprises</a> <span>|</span>
                <a href="{{ path('offres') }}" class="{% if current_page == 'offres' %}selected{% endif %}">Offres</a> <span>|</span>
                <a href="{{ path('whishlist') }}" class="{% if current_page == 'whishlist' %}selected{% endif %}">Whishlist</a> <span>|</span>
                <a href="{{ path('contact') }}" class="{% if current_page == 'contact' %}selected{% endif %}">Contact</a>
            </div>
            <div class="account">
                {% if user %}
                    <!-- Si utilisateur connecté -->
                    <div class="user-dropdown">
                        <span class="username">{{ user.name }}</span>
                        <div class="dropdown-content">
                            <a href="{{ path('profile') }}">Mon profil</a>
                            <a href="{{ path('logout') }}">Déconnexion</a>
                        </div>
                    </div>
                {% else %}
                    <!-- Si utilisateur non connecté -->
                    <a href="{{ path('login') }}" class="connexion-inscription-btn">Connexion / Inscription</a>
                {% endif %}
            </div>
        </nav>

        <!-- Menu burger pour mobile -->
        <div class="burger">
            <div class="burger-icon">
                <img src="/assets/images/burger.png" alt="Menu">
            </div>
            <div class="bar">
                <a href="{{ path('home') }}">Accueil</a>
                <a href="{{ path('entreprises') }}">Entreprises</a>
                <a href="{{ path('offres') }}">Offres</a>
                <a href="{{ path('whishlist') }}">Whishlist</a>
                <a href="{{ path('contact') }}">Contact</a>
                {% if user %}
                    <a href="{{ path('profile') }}">Mon profil ({{ user.name }})</a>
                    <a href="{{ path('logout') }}">Déconnexion</a>
                {% else %}
                    <a href="{{ path('login') }}">Connexion / Inscription</a>
                {% endif %}
            </div>
        </div>
    {% endif %}

    <!-- Contenu principal -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Pied de page -->
    <footer class="footer center">
        &copy; {{ "now"|date("Y") }} Lebonplan - Tous droits réservés - <a href="{{ path('legal-notice') }}">Mention Légale</a>
    </footer>

    <script src="/assets/code.js"></script>
</body>
</html>
